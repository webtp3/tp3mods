

plugin.tx_tp3mods_tp3micro {
    view {
        templateRootPaths.0 = EXT:tp3mods/Resources/Private/Templates/
        templateRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.templateRootPath
        partialRootPaths.0 = EXT:tp3mods/Resources/Private/Partials/
        partialRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.partialRootPath
        layoutRootPaths.0 = EXT:tp3mods/Resources/Private/Layouts/
        layoutRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.layoutRootPath
    }
    persistence {
        storagePid = plugin.tx_tp3mods_tp3micro.persistence.storagePid
        #recursive = 1
    }
    features {
        #skipDefaultArguments = 1
    }
    mvc {
        #callDefaultActionIfActionCantBeResolved = 1
    }
    privacyProtect = {$plugin.tx_tp3mods_tp3micro.privacyProtect}
    privacyPid = {$plugin.tx_tp3mods_tp3micro.privacyPid}
    settings{
        account = {$google_analytics}
        trackexternal  = {$plugin.tx_tp3mods_tp3micro.settings.trackexternal}
        anonymized = {$plugin.tx_tp3mods_tp3micro.settings.anonymized}
        type = {$plugin.tx_tp3mods_tp3micro.settings.type}
        demographics = 0
        type = universal
        optout = 1
        _setDomainName = {$baseUrl}
        optout.disablefunction = {$plugin.tx_tp3mods_tp3micro.settings.optout.disablefunction}
        optout = {$plugin.tx_tp3mods_tp3micro.settings.optout}
        trackfiles = {$plugin.tx_tp3mods_tp3micro.settings.trackfiles}
        path = {$plugin.tx_tp3mods_tp3micro.settings.path}
    }
}

plugin.tx_tp3mods._CSS_DEFAULT_STYLE (
    textarea.f3-form-error {
        background-color:#FF9F9F;
        border: 1px #FF0000 solid;
    }

    input.f3-form-error {
        background-color:#FF9F9F;
        border: 1px #FF0000 solid;
    }

    .tx-tp3mods table {
        border-collapse:separate;
        border-spacing:10px;
    }

    .tx-tp3mods table th {
        font-weight:bold;
    }

    .tx-tp3mods table td {
        vertical-align:top;
    }

    .typo3-messages .message-error {
        color:red;
    }

    .typo3-messages .message-ok {
        color:green;
    }
)

# Module configuration
module.tx_tp3mods_tools_tp3modstp3backend {
    persistence {
        storagePid = {$module.tx_tp3mods_tp3backend.persistence.storagePid}
    }
    view {
        templateRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Templates/
        templateRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.templateRootPath}
        partialRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Partials/
        partialRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.partialRootPath}
        layoutRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Layouts/
        layoutRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.layoutRootPath}
    }
}
lib.fluidContent {
    templateRootPaths {
        200 = EXT:tp3mods/Resources/Private/Templates/ContentElements/
    }
    partialRootPaths {
        200 = EXT:tp3mods/Resources/Private/Partials/ContentElements/
    }
    layoutRootPaths {
        200 = EXT:tp3mods/Resources/Private/Layouts/ContentElements/
    }
}
tt_content {
    tp3mods_downloads < lib.fluidContent
    tp3mods_downloads {
        templateName = Tp3Downloads.html
    }
}

[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.Tp3App}]
    page.includeJSFooterlibs {

        tp3_app >
        tp3_app = EXT:tp3mods/Resources/Public/JavaScript/tp3_app.js
        tp3_app.async = 1
    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.glyphicons}]
    page.includeCSS {
        glyphicons = EXT:tp3mods/Resources/Public/Css/tp3_glyphicons.css
        glyphicons.async = 1

    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.awesomeicons}]
    page.includeCSS {
        awesomeicons = EXT:tp3mods/Resources/Public/Css/tp3_awesomeicons.css
        awesomeicons.async = 1

    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.Tp3Css}]
    page.includeCSS {
        tp3_app = EXT:tp3mods/Resources/Public/Css/tp3_app.css
        tp3_app.async = 1

    }
[end]

[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.privacyProtect}]

    page.includeJSFooterlibs {

        cookieconsent = EXT:tp3mods/Resources/Public/JavaScript/cookieconsent.min.js
       #cookieconsent.external = 1
    }
    page.includeCSS{
        cookieconsent = EXT:tp3mods/Resources/Public/Css/cookieconsent/cookieconsent.min.css
        #cookieconsent.external = 1
    }
    state.data = TSFE:fe_user|sesData|tracking
    state.intval = 1

    lib.cookieconsent >
    lib.cookieconsent = TEXT
    lib.cookieconsent.value (
<script>
var p = p || {},gaOptout = gaOptout || false, gaOptin = gaOptin || false;

    window.cookieconsent.initialise({
        "palette": {
            "popup": {
                "background": "{$plugin.bootstrap_package.settings.less.body-bg}",
                "text": "{$plugin.bootstrap_package.settings.less.gray-base}"
            },


            "button": {
                "background": "{$plugin.bootstrap_package.settings.less.brand-info}"
            }
        },
        "theme": "edgeless",
        "position": "bottom-right",
        "type": "opt-out",
        "content": {
            "message": "{$plugin.tx_tp3mods_tp3micro.settings.cookieconsent}",
            "dismiss": "ok",
            "deny": "nein",
            "link": "mehr hierzu",
            "href": "/?id={$plugin.tx_tp3mods_tp3micro.privacyPid}",
        },
        onPopupOpen: function() {
            console.log('<em>onPopupOpen()</em> called');

        },
        onPopupClose: function() {
            console.log('<em>onPopupClose()</em> called');

        },
        onInitialise: function (status) {
            console.log('<em>onInitialise()</em> called with status <em>'+status+'</em>');
        },
        onStatusChange: function(status) {
            console.log('<em>onStatusChange()</em> called with status <em>'+status+'</em>');
            if(status == "deny"){
                    tp3_app.cookies = false;
                   if(gaOptout && $.type(gaOptout) == "function") gaOptout();
                    tp3_app.privacyRequest(0);
            }
            else{
                    tp3_app.cookies = true;
                    if(gaOptin && $.type(gaOptin) == "function")gaOptin();
                    tp3_app.privacyRequest(1);
            }
        },
        onRevokeChoice: function() {
            console.log('<em>onRevokeChoice()</em> called');
        },

    },function (popup) {
        p = popup;
    }, function (err) {
        console.log(err);
    });



var btn = $('<button/>',{id :"cookieconsent-open", class:"btn fa fa-eye"}).appendTo($('footer .footer-section-meta .frame.meta'));

$('#cookieconsent-open').click(function (e) {
    if(p.isOpen())p.close();
    else p.open();
});


</script>
    )
    /*
    add cookieconsent
    */
    page.footerData.555 < lib.cookieconsent

[end]
/*
tt_content {
tp3mods_downloads < lib.fluidContent
tp3mods_downloads {
templateName = Tp3Downloads.html
dataProcessing {
1 = Vendor\YourExtensionKey\DataProcessing\NewContentElementProcessor
1 {
useHere = theConfigurationOfTheDataProcessor
}
}
}
}
*/
/*
remove analytics from bootstrap_package
*/
page.jsFooterInline.10 >
