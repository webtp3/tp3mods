

plugin.tx_tp3mods_tp3micro {
    view {
        templateRootPaths.0 = EXT:tp3mods/Resources/Private/Templates/
        templateRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.templateRootPath
        partialRootPaths.0 = EXT:tp3mods/Resources/Private/Partials/
        partialRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.partialRootPath
        layoutRootPaths.0 = EXT:tp3mods/Resources/Private/Layouts/
        layoutRootPaths.1 = plugin.tx_tp3mods_tp3micro.view.layoutRootPath
    }
    persistence {
        storagePid = plugin.tx_tp3mods_tp3micro.persistence.storagePid
        #recursive = 1
    }
    features {
        #skipDefaultArguments = 1
    }
    mvc {
        #callDefaultActionIfActionCantBeResolved = 1
    }
    privacyProtect = {$plugin.tx_tp3mods_tp3micro.privacyProtect}
    privacyPid = {$plugin.tx_tp3mods_tp3micro.privacyPid}
    settings{
        Tp3App = {$plugin.tx_tp3mods_tp3micro.settings.Tp3App}
        glyphicons = {$plugin.tx_tp3mods_tp3micro.settings.glyphicons}
        awesomeicons = {$plugin.tx_tp3mods_tp3micro.settings.awesomeicons}
        Tp3Css = {$plugin.tx_tp3mods_tp3micro.settings.Tp3Css}
        account = {$google_analytics}
        trackexternal  = {$plugin.tx_tp3mods_tp3micro.settings.trackexternal}
        anonymized = {$plugin.tx_tp3mods_tp3micro.settings.anonymized}
        advertizing = {$plugin.tx_tp3mods_tp3micro.settings.advertizing}
        demographics =  {$plugin.tx_tp3mods_tp3micro.settings.demographics}
        trackpageload =  {$plugin.tx_tp3mods_tp3micro.settings.trackpageload}
        inpagelinkid =  {$plugin.tx_tp3mods_tp3micro.settings.inpagelinkid}
        doubleclick =  {$plugin.tx_tp3mods_tp3micro.settings.doubleclick}
        UAdualtag =  {$plugin.tx_tp3mods_tp3micro.settings.UAdualtag}
        bouncerate =  {$plugin.tx_tp3mods_tp3micro.settings.bouncerate}
        trackexternal = {$plugin.tx_tp3mods_tp3micro.settings.trackexternal}
        type = {$plugin.tx_tp3mods_tp3micro.settings.type}
        demographics = {$plugin.tx_tp3mods_tp3micro.settings.demographics}
        type = {$plugin.tx_tp3mods_tp3micro.settings.type}
        optout = {$plugin.tx_tp3mods_tp3micro.settings.optout}
        _setDomainName = {$baseUrl}
        optout.disablefunction = {$plugin.tx_tp3mods_tp3micro.settings.optout.disablefunction}
        optout = {$plugin.tx_tp3mods_tp3micro.settings.optout}
        trackfiles = {$plugin.tx_tp3mods_tp3micro.settings.trackfiles}
        path = {$plugin.tx_tp3mods_tp3micro.settings.path}
    }
}

plugin.tx_tp3mods._CSS_DEFAULT_STYLE (
    textarea.f3-form-error {
        background-color:#FF9F9F;
        border: 1px #FF0000 solid;
    }

    input.f3-form-error {
        background-color:#FF9F9F;
        border: 1px #FF0000 solid;
    }

    .tx-tp3mods table {
        border-collapse:separate;
        border-spacing:10px;
    }

    .tx-tp3mods table th {
        font-weight:bold;
    }

    .tx-tp3mods table td {
        vertical-align:top;
    }

    .typo3-messages .message-error {
        color:red;
    }

    .typo3-messages .message-ok {
        color:green;
    }
)

# Module configuration
module.tx_tp3mods_tools_tp3modstp3backend {
    persistence {
        storagePid = {$module.tx_tp3mods_tp3backend.persistence.storagePid}
    }
    view {
        templateRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Templates/
        templateRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.templateRootPath}
        partialRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Partials/
        partialRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.partialRootPath}
        layoutRootPaths.0 = EXT:tp3mods/Resources/Private/Backend/Layouts/
        layoutRootPaths.1 = {$module.tx_tp3mods_tp3backend.view.layoutRootPath}
    }
}
lib.fluidContent {
    templateRootPaths {
        200 = EXT:tp3mods/Resources/Private/Templates/ContentElements/
    }
    partialRootPaths {
        200 = EXT:tp3mods/Resources/Private/Partials/ContentElements/
    }
    layoutRootPaths {
        200 = EXT:tp3mods/Resources/Private/Layouts/ContentElements/
    }
}
tt_content {
    tp3mods_downloads < lib.fluidContent
    tp3mods_downloads {
        templateName = Tp3Downloads.html
    }
}

[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.Tp3App}]
    page.includeJSFooterlibs {

        tp3_app >
        tp3_app = EXT:tp3mods/Resources/Public/JavaScript/tp3_app.js
        tp3_app.async = 1
    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.glyphicons}]
    page.includeCSS {
        glyphicons = EXT:tp3mods/Resources/Public/Css/tp3_glyphicons.css
        glyphicons.async = 1

    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.awesomeicons}]
    page.includeCSS {
        awesomeicons = EXT:tp3mods/Resources/Public/Css/tp3_awesomeicons.css
        awesomeicons.async = 1

    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.Tp3Css}]
    page.includeCSS {
        tp3_app = EXT:tp3mods/Resources/Public/Css/tp3_app.css
        tp3_app.async = 1

    }
[end]
[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.privacyProtect}] && [globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.settings.advertizing}]

    page.includeJSFooterlibs {

        cookieconsent = EXT:tp3mods/Resources/Public/JavaScript/cookieconsent.min.js
        #cookieconsent.external = 1
    }
    page.includeCSS{
        cookieconsent = EXT:tp3mods/Resources/Public/Css/cookieconsent/cookieconsent.min.css
        #cookieconsent.external = 1
    }

    lib.cookieconsent >
    lib.cookieconsent = COA
    lib.cookieconsent.20 = TEXT
    lib.cookieconsent.20.value (
      <script>    var p = p || {},gaOptout = gaOptout || false, gaOptin = gaOptin || false;

    window.cookieconsent.initialise({
        "palette": {
            "popup": {
                "background": "{$plugin.bootstrap_package.settings.less.body-bg}",
                "text": "{$plugin.bootstrap_package.settings.less.gray-base}"
            },


            "button": {
                "background": "{$plugin.bootstrap_package.settings.less.brand-info}"
            }
        },
        "theme": "edgeless",
        "position": "bottom-right",
        "type": "opt-out",
        "content": {
            "message": "{$plugin.tx_tp3mods_tp3micro.settings.cookieconsent}",
            "dismiss": "ok",
            "deny": "nein",
            "link": "mehr hierzu",
            "href": "/?id={$plugin.tx_tp3mods_tp3micro.privacyPid}",
        },
        onPopupOpen: function() {
            console.log('<em>onPopupOpen()</em> called');

        },
        onPopupClose: function() {
            console.log('<em>onPopupClose()</em> called');

        },
        onInitialise: function (status) {
            console.log('<em>onInitialise()</em> called with status <em>'+status+'</em>');
        },
        onStatusChange: function(status) {
            console.log('<em>onStatusChange()</em> called with status <em>'+status+'</em>');
            if(status == "deny"){
                    tp3_app.cookies = false;
                   if(gaOptout && $.type(gaOptout) == "function") gaOptout();
                    tp3_app.privacyRequest(0);
            }
            else{
                    tp3_app.cookies = true;
                    if(gaOptin && $.type(gaOptin) == "function")gaOptin();
                    tp3_app.privacyRequest(1);
            }
        },
        onRevokeChoice: function() {
            console.log('<em>onRevokeChoice()</em> called');
        },

    },function (popup) {
        p = popup;
    }, function (err) {
        console.log(err);
    });



var btn = $('<button/>',{id :"privacyPopup-open", class:"btn fa fa-eye"}).appendTo($('footer .footer-section-meta .frame.meta'));

$('#privacyPopup-open').click(function (e) {
    if(p.isOpen())p.close();
    else p.open();
});



</script>
    )
[end]

[globalVar = LIT:1 = {$plugin.tx_tp3mods_tp3micro.privacyProtect}] && [globalVar = LIT:0 = {$plugin.tx_tp3mods_tp3micro.settings.advertizing}]



    lib.cookieconsent >
    lib.cookieconsent = COA

    lib.cookieconsent.20 = TEXT
    lib.cookieconsent.20.value (
 <script>
var p = p || {},gaOptout = gaOptout || false, gaOptin = gaOptin || false, tp3_app = tp3_app || {};

var btn = $('<button/>',{id :"privacyPopup-open", class:"btn fa fa-eye"}).appendTo($('footer .footer-section-meta .frame.meta'));

$('#privacyPopup-open').on('click',  function(e) {
        tp3_app.privacyPopup();
        });
tp3_app.privacyPopup =  function(e) {
            $j('#privacyProtect').remove();
            var $this = $j(this)
                , $modal = $('<div class="modal fade right " id="privacyProtect" tabindex="-1" role="dialog"  data-backdrop="false">\n' +
                '  <div class="modal-dialog modal-side modal-bottom-right" role="document">\n' +
                '    <div class="modal-content">\n' +
                '      <div class="modal-header">\n' +
                '        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n' +
                '      </div>\n' +
                '      <div class="modal-body">{$plugin.tx_tp3mods_tp3micro.settings.cookieconsent}  <a href="/?id={$plugin.tx_tp3mods_tp3micro.privacyPid}" >mehr hierzu</a>' +
                '      </div>\n' +
                '      <div class="modal-footer"> <button type="button"  id="privacyProtect_Nein" class="btn btn-default" data-dismiss="modal">Nein</button>\n' +
                '       <button type="button" id="privacyProtect_OK" class="btn btn-primary" data-dismiss="modal">OK</button>\n' +
                '      </div>\n' +
                '    </div>\n' +
                '  </div>\n' +
                '</div>');

            $j('body').append($modal);
            $modal.modal({ keyboard: true});

        $("#privacyProtect").on("shown.bs.modal", function(e) {
                //var link = $(e.relatedTarget);
                $("body").removeClass("modal-open");
            });

       $('#privacyProtect_Nein').on('click', function(e) {
                        tp3_app.cookies = false;
                       if(gaOptout && $.type(gaOptout) == "function") gaOptout();
                        tp3_app.privacyRequest(0);

             })
       $('#privacyProtect_OK').on('click', function(e) {

                    tp3_app.cookies = true;
                    if(gaOptin && $.type(gaOptin) == "function")gaOptin();
                    tp3_app.privacyRequest(1);
            })
    return false;
    };
    var privacyPopup_open = privacyPopup_open || 0;
if(privacyPopup_open != "1")tp3_app.privacyPopup();
</script>
    )
[end]
    /*
    add cookieconsent
    */
    page.footerData.555 < lib.cookieconsent


page.10 {
    templateName = TEXT
    templateName.stdWrap.cObject = CASE
    templateName.stdWrap.cObject {
        key.data = pagelayout

        pagets__default_clean = TEXT
        pagets__default_clean.value = DefaultClean

        pagets__default_2_columns = TEXT
        pagets__default_2_columns.value = Default2Columns

        pagets__default_2_columns_25_75 = TEXT
        pagets__default_2_columns_25_75.value = Default2Columns2575

        pagets__default_2_columns_50_50 = TEXT
        pagets__default_2_columns_50_50.value = Default2Columns5050

        pagets__default_2_columns_offset_right = TEXT
        pagets__default_2_columns_offset_right.value = Default2ColumnsOffsetRight

        pagets__default_3_columns = TEXT
        pagets__default_3_columns.value = Default3Columns

        pagets__default_subnavigation_right = TEXT
        pagets__default_subnavigation_right.value = DefaultSubNavRight

        pagets__default_subnavigation_right_2_columns = TEXT
        pagets__default_subnavigation_right_2_columns.value = DefaultSubNavRight2Columns

        pagets__default_subnavigation_left = TEXT
        pagets__default_subnavigation_left.value = DefaultSubNavLeft

        pagets__default_subnavigation_left_2_columns = TEXT
        pagets__default_subnavigation_left_2_columns.value = DefaultSubNavLeft2Columns

        pagets__special_start = TEXT
        pagets__special_start.value = SpecialStart

        pagets__special_feature = TEXT
        pagets__special_feature.value = SpecialFeature

        pagets__newsletter = TEXT
        pagets__newsletter.value = Newsletter

        default = TEXT
        default.value = Default
    }

    settings {
        snippet_type = {$snippet_type}
    }

    templateRootPaths {
        0 = EXT:tp3mods/Resources/Private/Templates/Page/
        1 = {$page.fluidtemplate.templateRootPath}
    }


    partialRootPaths {
        0 = EXT:tp3mods/Resources/Private/Partials/Page/
        1 = {$page.fluidtemplate.partialRootPath}
    }

    layoutRootPaths {
        0 = EXT:tp3mods/Resources/Private/Layouts/Page/
        1 = {$page.fluidtemplate.layoutRootPath}
    }

    ##########################
    ### DATA PREPROCESSING ###
    ##########################
    dataProcessing {
        10 = TYPO3\CMS\Frontend\DataProcessing\MenuProcessor
        10 {
            levels = 2
            includeSpacer = 1
            as = mainnavigation
        }

        20 = TYPO3\CMS\Frontend\DataProcessing\MenuProcessor
        20 {
            entryLevel = 1
            levels = 2
            expandAll = 0
            includeSpacer = 1
            as = subnavigation
        }

        30 = TYPO3\CMS\Frontend\DataProcessing\MenuProcessor
        30 {
            special = rootline
            special.range = 0|-1
            includeNotInMenu = 1
            as = breadcrumb
            if {
                value = {$page.theme.breadcrumbEnableLevel}
                value {
                    insertData = 1
                    prioriCalc = 1
                    stdWrap.wrap = |-1
                }

                isGreaterThan {
                    data = level
                }
            }
        }

        40 = TYPO3\CMS\Frontend\DataProcessing\MenuProcessor
        40 {
            special = language
            special.value = {$page.theme.language.languageValue}
            as = languagenavigation
            if {
                isTrue = {$page.theme.language.languageValue}
            }
        }

        50 = TYPO3\CMS\Frontend\DataProcessing\MenuProcessor
        50 {
            special = {$page.theme.meta.navigationType}
            special.value = {$page.theme.meta.navigationValue}
            includeNotInMenu = {$page.theme.meta.includeNotInMenu}
            as = metanavigation
            if {
                isTrue = {$page.theme.meta.navigationValue}
            }
        }
    }

    ################
    ### SETTINGS ###
    ################
    settings {
        logo {
            file = {$page.logo.file}
            fileInverted = {$page.logo.fileInverted}
            height = {$page.logo.height}
            width = {$page.logo.width}
            linktitle = {$page.logo.linktitle}
        }

        breadcrumb {
            enable = {$page.theme.breadcrumb}
        }

        navigation {
            style = {$page.theme.navigationstyle}
            type = {$page.theme.navigationtype}
        }

        copyright {
            enable = {$page.theme.copyright.enable}
            text = {$page.theme.copyright.text}
        }

        meta {
            enable = {$page.theme.meta.enable}
        }

        language {
            enable = {$page.theme.language.enable}
        }
    }

    #################
    ### VARIABLES ###
    #################
    variables {
        showFooter = TEXT
        showFooter.value = {$page.theme.footersection.enable}
        pageTitle = TEXT
        pageTitle.data = page:title
        siteTitle = TEXT
        siteTitle.data = TSFE:tmpl|setup|sitetitle
        rootPage = TEXT
        rootPage.data = leveluid:0
        logoAlt = COA
        logoAlt {
            10 = TEXT
            10 {
                data = TSFE:tmpl|setup|sitetitle
                noTrimWrap = || logo|
                if.isFalse = {$page.logo.alt}
            }

            20 = TEXT
            20 {
                value = {$page.logo.alt}
                if.isTrue = {$page.logo.alt}
            }
        }
    }

}
/*
tt_content {
tp3mods_downloads < lib.fluidContent
tp3mods_downloads {
templateName = Tp3Downloads.html
dataProcessing {
1 = Vendor\YourExtensionKey\DataProcessing\NewContentElementProcessor
1 {
useHere = theConfigurationOfTheDataProcessor
}
}
}
}
*/
/*
remove analytics from bootstrap_package
*/
page.jsFooterInline.10 >
